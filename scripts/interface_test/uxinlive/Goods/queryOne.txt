*** Settings ***
Library           ../../../../Resources/uxin_request.py
Library           ../../../../Resources/uxin_live.py
Library           ../../../../Resources/tools_library.py
Variables         ../../../../Resources/global_config.py
Resource          ../../../../Resources/db_operation.txt
Resource          ../../../../Resources/check_operation.txt
Library           ../../../../Resources/redis_library.py
Library           ../../../../Resources/Jsonto.py

*** Test Cases ***
query_charge_good_success
    [Tags]    normal
    #初始化数据
    ${ac}=    get_token    1352245789
    ${random}=    Randomqq
    ${datas}=    Set Variable    name=candy${random}&typeId=1&price=10086.88&discount=8.8&discountDesc=boom&golds=1000&addGolds=9&addGoldsDesc=GoldsDesc&remark=testmark
    ${files}=    Set Variable    pic=@${CURDIR}/1.png
    ${content}=    upload_file    ${ac}    params=${datas}    files=${files}    url=goods/create
    ${content}=    utf_to_unicode    ${content}
    #打印结果，用于调试
    log    ${content}
    ${goods_id}=    get_from_jsonObject    ${content}    /b/id
    ${res_pic}=    get_from_jsonObject    ${content}    /b/pic
    ${ac}=    get_token    1352245790
    ${headers}=    Set Variable    ${ac};_c=1
    ${datas}=    create dictionary    id=${goods_id}
    #调用关注列表接口
    ${resp}=    get_general    ${live_goods_url}    queryById    headers=${headers}    params=${datas}
    ${content}=    utf_to_unicode    ${resp.content}
    #打印结果，用于调试
    log    ${content}
    should contain many    "b":{"id":${goods_id},"name":"candy${random}","typeId":1,"price":10086.88,"discount":8.8,"discountDesc":"boom","golds":1000,"addGolds":9,"addGoldsDesc":"GoldsDesc","pic":"${res_pic}","status":1,"remark":"testmark"}}

query_gift_good_success
    [Tags]    normal
    #初始化数据
    ${ac}=    get_token    1352245790
    ${random}=    Randomqq
    ${datas}=    Set Variable    name=candy${random}&typeId=2&price=10086.88&discount=8.8&discountDesc=boom&golds=1000&addGolds=9&addGoldsDesc=GoldsDesc&remark=testmark
    ${files}=    Set Variable    pic=@${CURDIR}/1.png
    ${content}=    upload_file    ${ac}    params=${datas}    files=${files}    url=goods/create
    ${content}=    utf_to_unicode    ${content}
    #打印结果，用于调试
    log    ${content}
    ${goods_id}=    get_from_jsonObject    ${content}    /b/id
    ${res_pic}=    get_from_jsonObject    ${content}    /b/pic
    ${ac}=    get_token    1352245790
    ${headers}=    Set Variable    ${ac};_c=1
    ${datas}=    create dictionary    id=${goods_id}
    #调用关注列表接口
    ${resp}=    get_general    ${live_goods_url}    queryById    headers=${headers}    params=${datas}
    ${content}=    utf_to_unicode    ${resp.content}
    #打印结果，用于调试
    log    ${content}
    should contain many    "b":{"id":${goods_id},"name":"candy${random}","typeId":2,"price":10086.88,"discount":8.8,"discountDesc":"boom","golds":1000,"addGolds":9,"addGoldsDesc":"GoldsDesc","pic":"${res_pic}","status":1,"remark":"testmark"}}

query_after_update_success
    [Tags]    normal
    #初始化数据
    ${ac}=    get_token    1352245789
    ${random}=    Randomqq
    ${datas}=    Set Variable    name=candy${random}&typeId=1&price=10086.88&discount=8.8&discountDesc=boom&golds=1000&addGolds=9&addGoldsDesc=GoldsDesc&remark=testmark
    ${files}=    Set Variable    pic=@${CURDIR}/1.png
    ${content}=    upload_file    ${ac}    params=${datas}    files=${files}    url=goods/create
    ${content}=    utf_to_unicode    ${content}
    #打印结果，用于调试
    log    ${content}
    ${goods_id}=    get_from_jsonObject    ${content}    /b/id
    ${res_pic}=    get_from_jsonObject    ${content}    /b/pic
    #update
    ${random2}=    Randomqq
    ${datas}=    Set Variable    typeId=1&id=${goods_id}&name=candy${random2}&price=88.88
    ${files}=    Set Variable    pic=@${CURDIR}/2.png
    ${content}=    upload_file    ${ac}    params=${datas}    files=${files}    url=goods/update
    ${ac}=    get_token    1352245790
    ${headers}=    Set Variable    ${ac};_c=1
    ${datas}=    create dictionary    id=${goods_id}
    #
    ${resp}=    get_general    ${live_goods_url}    queryById    headers=${headers}    params=${datas}
    ${content}=    utf_to_unicode    ${resp.content}
    #打印结果，用于调试
    log    ${content}
    should contain many    "b":{"id":${goods_id},"name":"candy${random2}","typeId":1,"price":88.88,"discount":8.8,"discountDesc":"boom","golds":1000,"addGolds":9,"addGoldsDesc":"GoldsDesc","pic":"${res_pic}","status":1,"remark":"testmark"}}

query_gbk_good_success
    [Tags]    normal
    #初始化数据
    ${ac}=    get_token    1352245790
    ${headers}=    Set Variable    ${ac};_c=2
    ${random}=    Randomqq
    ${datas}=    create dictionary    name=糖果${random}    typeId=2    price=10086.88    discount=8.8    discountDesc=爆炸
    ...    golds=1000    addGolds=9    addGoldsDesc=商品描述    remark=测试备注
    ${resp}=    post_general    ${live_goods_url}    create    headers=${headers}    datas=${datas}
    ${content}=    utf_to_unicode    ${resp.content}
    #打印结果，用于调试
    log    ${content}
    ${goods_id}=    get_from_jsonObject    ${content}    /b/id
    ${ac}=    get_token    1352245790
    ${headers}=    Set Variable    ${ac};_c=1
    ${datas}=    create dictionary    id=${goods_id}
    #调用关注列表接口
    ${resp}=    get_general    ${live_goods_url}    queryById    headers=${headers}    params=${datas}
    ${content}=    utf_to_unicode    ${resp.content}
    #打印结果，用于调试
    log    ${content}
    should contain many    "b":{"id":${goods_id},"name":"糖果${random}","typeId":2,"price":10086.88,"discount":8.8,"discountDesc":"爆炸","golds":1000,"addGolds":9,"addGoldsDesc":"商品描述","status":1,"remark":"测试备注"}}
