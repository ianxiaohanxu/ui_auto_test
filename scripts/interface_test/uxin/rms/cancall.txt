*Settings*							
Documentation	参数\t说明						
...	| callerUid | 主叫uid |						
...	| callerPhone | 主叫电话号码 |						
...	| pv | 平台 |						
...	| v | 版本 |						
...	| calledUid | 被叫uid |						
...	| calledPhone | 被叫电话号码 |						
...	| callMode | 呼叫方式(1:直拨 2:回拨 3:OTT) |						
...	| callType | 呼叫类型(0：普通电话 1：国际电话 3：聊一聊) |	
...  # todo  CallManagerImpl.java  line 1165
...    费率计算					
Library	../../../../Resources/uxin_request.py		
Library	../../../../Resources/tools_library.py					
Resource	../../../../Resources/check_operation.txt
Resource	../../../../Resources/db_operation.txt						
Variables	../../../../Resources/global_config.py
Variables	../../../../Resources/interface_data.py						
							
*Test Cases*							
cancall_zhibo_vip_successs	
	[Tags]	normal 	P0	offline
	[Documentation]	会员直拨，不消耗U币					
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid}	phone=${normal_phone}	pv=ios	v=5.0.0	calledPhone=008618688410526	callMode=1	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#打印结果，用于调试						
	log	${resp.content}					
	#校验返回						
	should contain many	${resp.content}	"brand":"uxinvip"	"feeRate":0 	"maxMinutes":300 	"clientMsg":"0|1.0|1|200" 	"msg":"SUCCESS","result":0  

cancall_zhibo_not_vip_successs	
	[Tags]	normal 	P0	offline
	[Documentation]	非会员直拨普通电话，消耗U币					
	#初始化数据						
	${datas}=	create dictionary	uid=${not_vip_uid}	phone=${not_vip_phone}	pv=ios	v=5.0.0	calledPhone=008618688410526	callMode=1	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#查询账户u币余额
	${db}=	get_bc_db	${not_vip_uid}
	${t}=	evaluate	${not_vip_uid}%100
	${u}=	db_pymysql_query 	select ubalance from ${db}.balance_${t} where uid = ${not_vip_uid}	${db_url}	${db}
	${maxMinutes}=	evaluate	${u[0][0]}/100000			
	#校验返回						
	should contain many	${resp.content}	"brand":"uxin"	"feeRate":100000 	"maxMinutes":${maxMinutes} 	"clientMsg":"0|1.0|0|0" 	"msg":"SUCCESS","result":0					
							
cancall_zhibo_uid_not_exist	
	[Documentation]	uid不存在，当做非会员					
	[Tags]	normal	bug				
	#初始化数据						
	${datas}=	create dictionary	uid=200101079123123	phone=1379817179999	pv=ios	v=5.0.0	calledPhone=008618688410526
	...	callMode=1	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#打印结果，用于调试						
	log	${resp.content}					
	#校验						
	should contain many	${resp.content}	"brand":"uxin"	"feeRate":100000 	"maxMinutes":5 	"clientMsg":"0|1.0|0|0" 	"msg":"SUCCESS","result":0 		

cancall_zhibo_foreign_vip_successs	
	[Tags]	normal 	P0	offline
	[Documentation]	会员直拨国外号码				
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid}	phone=${normal_phone}	pv=ios	v=5.0.0	calledPhone=00118688410526	callMode=1	callType=1				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#查询账户u币余额
	${db}=	get_bc_db	${normal_uid}
	${t}=	evaluate	${normal_uid}%100
	${u}=	db_pymysql_query 	select ubalance from ${db}.balance_${t} where uid = ${normal_uid}	${db_url}	${db}
	${maxMinutes}=	evaluate	${u[0][0]}/500000				
	#校验返回						
	should contain many	${resp.content}	"brand":"uxinvip"	"feeRate":500000 	"maxMinutes":${maxMinutes} 	"clientMsg":"1|5.0|0|0" 	"msg":"SUCCESS","result":0 

cancall_zhibo_foreign_notvip_successs	
	[Tags]	normal 	P0	offline
	[Documentation]	非会员直拨国外号码				
	#初始化数据						
	${datas}=	create dictionary	uid=${not_vip_uid}	phone=${not_vip_phone}	pv=ios	v=5.0.0	calledPhone=00118688410526	callMode=1	callType=1				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#校验返回						
	should contain many	${resp.content}	"msg":"VIP_BALANCE_NOT_ENOUGH","result":10502

cancall_zhibo_not_support_city	
	[Tags]	normal 	P0	offline
	[Documentation]	不支持的国际电话区号				
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid}	phone=${normal_phone}	pv=ios	v=5.0.0	calledPhone=008618688410526	callMode=1	callType=1				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#打印结果，用于调试						
	log	${resp.content}					
	#校验返回						
	should contain many	${resp.content}	{"data":null,"msg":"NOT_SUPPORT_CITY","result":10503}

cancall_zhibo_randomchat	
	[Tags]	normal 	P0	offline
	[Documentation]	直拨方式拨打聊一聊,返回不支持				
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid}	phone=${normal_phone}	pv=ios	v=5.0.0	calledPhone=00118688410526	callMode=1	callType=3				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#打印结果，用于调试						
	log	${resp.content}					
	#校验返回						
	should contain many	${resp.content}	"msg":"OLD_RC_NOT_APPLY","result":10007

cancall_customer_service					
	[Documentation]  拨打有信团队客服电话，免费
	[Tags]	normal	P0	offline			
	#初始化数据						
	${datas}=	create dictionary	uid=${not_vip_uid}	phone=${not_vip_phone}	pv=ios	v=5.0.0	calledPhone=8000
	...	callMode=1	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}		
	#校验						
	Should Contain	${resp.content}	"msg":"CUSTOMER SERVICE TELEPHONE IS FREE","result":0		
cancall_ott_vip_successs
	[Documentation]  会员拨打ott免费	
	[Tags]	normal	offline	P0					
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid}	phone=${normal_phone}	pv=ios	v=5.0.0	calledPhone=${ott_phone}
	...	callMode=3	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	should contain many	${resp.content}	"brand":"uxinvip"	"feeRate":0 	"maxMinutes":300 	"clientMsg":"0|1.0|1|200" 	"msg":"SUCCESS","result":0 

cancall_ott_randomchat	
	[Tags]	normal 	P0	offline
	[Documentation]	拨打聊一聊				
	#初始化数据						
	${datas}=	create dictionary	uid=${honey_ban_uid}	phone=	pv=ios	v=5.0.0	calledPhone=${honey_phone}	callMode=3	callType=3				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#打印结果，用于调试						
	log	${resp.content}					
	#校验返回						
	should contain many	${resp.content}	 {"data":null,"msg":"RC_IS_IN_BLACK_LIST","result":10113}

cancall_uidphone_empty
	[Documentation]  uid和phone都不传	
	[Tags]	normal	offline	P0			
	#初始化数据						
	${datas}=	create dictionary	uid=	phone=	pv=ios	v=5.0.0	calledPhone=18688410526
	...	callMode=3	callType=1				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	should contain many		${resp.content}		"msg":"ARGUMENT ERROR","result":102	

cancall_phone_empty
	[Documentation]  phone不传，可以拨打
	[Tags]	normal	offline	P0			
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid} 	phone=	pv=ios	v=5.0.0	calledPhone=00118688410526
	...	callMode=3	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	should contain many		${resp.content}		"brand":"uxinvip"	"feeRate":0 	"maxMinutes":300 	"clientMsg":"0|1.0|1|200" 	"msg":"SUCCESS","result":0	

cancall_uid_empty
	[Documentation]  uid不传	，不可以拨打
	[Tags]	normal	offline	P0			
	#初始化数据						
	${datas}=	create dictionary	uid= 	phone=${normal_phone}	pv=ios	v=5.0.0	calledPhone=00118688410526
	...	callMode=3	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	should contain many		${resp.content}		{"data":null,"msg":"ARGUMENT ERROR","result":102}	

cancall_version_too_low
	[Documentation]  版本低于4.3.5不能使用此接口	
	[Tags]	normal	offline	P0			
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid}	phone=${normal_phone}	pv=ios	v=4.3.4	calledPhone=00118688410526
	...	callMode=3	callType=1				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	should contain many		${resp.content}		{"data":null,"msg":"CALL_VERSION_TOO_LOW","result":10504}

cancall_ott_notvip_successs
	[Documentation]	非会员拨打ott收费 2016/09/13的修改	
	[Tags]	normal	offline	P0					
	#初始化数据						
	${datas}=	create dictionary	uid=${not_vip_uid}	phone=${not_vip_phone}	pv=ios	v=5.0.0	calledPhone=${ott_phone}	callMode=3	callType=0 	ottFlag=1				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	#查询账户u币余额
	${db}=	get_bc_db	${not_vip_uid}
	${t}=	evaluate	${not_vip_uid}%100
	${u}=	db_pymysql_query 	select ubalance from ${db}.balance_${t} where uid = ${not_vip_uid}	${db_url}	${db}
	${maxMinutes}=	evaluate	${u[0][0]}/100000			
	#校验返回						
	should contain many	${resp.content}	"brand":"uxin"	"feeRate":100000 	"maxMinutes":${maxMinutes} 	"clientMsg":"0|1.0|0|0" 	"msg":"SUCCESS","result":0	

cancall_ott_vip_callednotuxin
	[Documentation]  被叫非有信用户	
	[Tags]	normal	offline	P0	bug					
	#初始化数据						
	${datas}=	create dictionary	uid=${normal_uid}	phone=${normal_phone}	pv=ios	v=5.0.0	calledPhone=18688410526
	...	callMode=3	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}	
	should contain many	${resp.content}	"brand":"uxinvip"	"feeRate":0 	"maxMinutes":300 	"clientMsg":"0|1.0|1|200" 	"msg":"SUCCESS","result":0 

cancall_zhibo_not_vip_touchuan	
	[Tags]	normal 	P0	offline  old
	[Documentation]	北上深非会员直拨普通电话，00-18点走透传（0087）显号，其他时间走非透传  2016/10/9 因为线路不够，这个策略暂时取消			
	#初始化数据						
	${datas}=	create dictionary	uid=${shenzhen_uid}	phone=${shenzhen_phone}	pv=ios	v=5.0.0	calledPhone=008618688410526	callMode=1	callType=0				
	${headers}=	Set Variable	Content-Type=application/json;charset=utf-8				
	#调用接口						
	${resp}=	post_general	${rms_url}	cancall	headers=${headers}	datas=${datas}			
	#校验返回						
	should contain many	${resp.content}	"brand":"uxinshenzhen"	"feeRate":100000 	"clientMsg":"0|1.0|0|0" 	"prefix":"0087"    "msg":"SUCCESS","result":0			
										
